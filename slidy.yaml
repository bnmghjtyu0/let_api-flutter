slidy: "1"
variables:
  customMessage: "Complete" # Gets  ${Local.var.customMessage}

scripts:
  # Simple command (slidy run doctor)
  doctor: flutter doctor
  chrome: flutter run -d chrome --web-renderer html --web-browser-flag "--disable-web-security"
  ios: flutter run --dart-define-from-file=./lib/environments/environment.json
  real:ios: flutter devices
  freezed: dart run build_runner build --delete-conflicting-outputs
  build:splash: dart run flutter_native_splash:create
  lint: dart fix --apply
  deepLink:ios: xcrun simctl openurl booted "appscheme://dwirandyh.medium.com/<路由>
  deepLink:android: adb shell am start -a android.intent.action.VIEW \
    -c android.intent.category.BROWSABLE \
    -d "http://dwirandyh.medium.com/popularDetail/0?pageId=1" \
    com.example.let_api_flutter
  # Steped command (slidy run cleanup)
  cleanup:
    description: "cleanup project"
    steps:
      - name: "Clean"
        run: flutter clean

      - name: "GetPackages"
        description: "Get packages"
        run: flutter pub get

      - name: "PodClean"
        description: "Execute pod clean"
        shell: bash # default: command. options (command|bash|sh|zsh|pwsh)
        condition: "${System.operatingSystem} == macos"
        working-directory: ios
        run: |-
          rm Podfile.lock
          pod deintegrate
          pod update
          pod install

      - run: echo ${Local.var.customMessage}
  distribute:
    description: "部屬"
    steps:
      - name: "android"
        description: "android 打包 apk"
        shell: bash # default: command. options (command|bash|sh|zsh|pwsh)
        working-directory: android
        run: flutter build apk --obfuscate --split-debug-info="./build" --dart-define-from-file=lib/environments/environment.json
